/**
 * 
 */
package edu.CSUSM.testTaker.UI;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

import com.jtizz.NavigationController.NavigationController;

import edu.CSUSM.testTaker.LibraryController;

/**
 * @author Justin
 *
 */
public class GUIController extends JFrame {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	public static final int FRAME_WIDTH = 750, FRAME_HEIGHT = 500;		//Frame dimensions
	private static final double DEFAULT_OFFSET = 5.0;					//Distance between frame and panels
	public static LibraryController currentLib;								//Accesses the current library
	private JPanel parentPanel;


	/**
	 * @param args
	 */
	public static void main(String[] args) {

		//Create the main Frame

		//Set a particular panel to be built and shown
		GUIController newController = new GUIController();
		newController.setVisible(true);

		//Create the library reference
		//currentLib = new LibraryController();
	}

	public GUIController(){
		super();

		//Build the frame
		buildFrame();

		//Add the navigation Controller
		/** Main Page */
		NavigationController mainNavigationController = new NavigationController();
		mainNavigationController.setBackground(Color.RED);

		CustomPage mainPage = new CustomPage(CustomPage.PanelType.LOGO_ONLY_TYPE, NavigationController.applicationImage);
		mainPage.setName(SideMenu.menuOptionButtons[0].getText());
		mainNavigationController.setInitialView(mainPage);
		
		//After we create the main page, we need to create more. 
		//Note that each subview will have its own nvaigation controller
		/** Courses */
		NavigationController coursesNC = new NavigationController();
		coursesNC.setBackground(Color.BLUE);
		
		CustomPage coursesMain = new CustomPage(CustomPage.PanelType.TWO_BUTTON_TYPE);
		coursesMain.setName(SideMenu.menuOptionButtons[1].getText());
		coursesNC.setInitialView(coursesMain);
		
		//For testing purposes, add a second page to the courses page. 
		/**
		 * Ideally, the courses main will extend the CustomPage class and become its own class.
		 * All that is going to happen in the next few lines will be in that class.
		 */
		
		coursesMain.currentActions[0].addActionListener(new ActionListener(){
			public void ActionPerformed(ActionEvent e){
				CustomPage testPage = new CustomPage(CustomPage.PanelType.THREE_BUTTON_TYPE);
				coursesNC.displayView(testPage);
			}
		});
		
		/**end*/
		
		/** Study Tools */
		NavigationController studyToolsNC = new NavigationController();
		studyToolsNC.setBackground(Color.ORANGE);
		
		CustomPage studyToolsMain = new CustomPage(CustomPage.PanelType.THREE_BUTTON_TYPE);
		studyToolsMain.setName(SideMenu.menuOptionButtons[2].getText());
		studyToolsNC.setInitialView(studyToolsMain);
		
		/** Statistics */
		NavigationController statsNC = new NavigationController();
		statsNC.setBackground(Color.PINK);
		
		CustomPage statsMain = new CustomPage(CustomPage.PanelType.LOGO_ONLY_TYPE);
		statsMain.setName(SideMenu.menuOptionButtons[3].getText());
		statsNC.setInitialView(statsMain);

		/** Page manager to control the side menu use */
		PageManager<NavigationController> pm = new PageManager<NavigationController>(this.parentPanel, SideMenu.menuOptionButtons, new NavigationController[]{mainNavigationController, coursesNC, studyToolsNC, statsNC}, 0);
		pm.hideAllPanelsButAtIndex(0);
		
		
		//When the side buttons are selected, update the title in the navigation controller
		for(JButton temp : SideMenu.menuOptionButtons){
			temp.addActionListener(new ActionListener(){
				public void actionPerformed(ActionEvent e){
					//Anything else that needs to be added to all of the side buttons
				}
			});
		}
		
	}



	private void buildFrame(){

		this.setSize(FRAME_WIDTH, FRAME_HEIGHT);
		this.setTitle("Testing Application");
		this.setLocationRelativeTo(null);
		this.setLayout(new BorderLayout());
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
		this.setVisible(true);
		this.parentPanel = new JPanel();
		this.parentPanel.setLayout(new BorderLayout());
		this.add(this.parentPanel, BorderLayout.CENTER);
		
		//Add the side menu
		SideMenu sm = new SideMenu(new String[]{"Home", "Courses", "Study Tools", "Statistics"});
		this.add(sm, BorderLayout.WEST);

	}



}
